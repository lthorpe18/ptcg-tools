<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hand / Outs Calculator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
      <a class="back" href="../../">← PTCG Tools</a>
      <div class="titlewrap">
        <h1>Hand / Outs Calculator</h1>
        <p class="sub">Pick a deck → choose a card → opening hand odds</p>
      </div>
      <div class="top-actions">
        <a id="btnGoDecks" class="ghost linkbtn" href="../decklists/">Decklist Manager</a>
        <a id="btnGoImport" class="ghost linkbtn" href="../decklists/?action=import">Import deck</a>
      </div>
    </header>

    <main class="layout">
      <section class="panel">
        <div class="row">
          <label class="grow">
            Choose saved deck
            <select id="deckSelect">
              <option value="">Loading…</option>
            </select>
          </label>

          <button id="btnRefresh" class="ghost" type="button">Refresh</button>
        </div>

        <div class="row">
          <label class="grow">
            Search card
            <input id="cardSearch" type="search" placeholder="Type to filter cards…" />
          </label>

          <label>
            Opening hand size
            <input id="handSize" type="number" min="1" max="60" step="1" value="7" />
          </label>

          <label>
            Deck size
            <input id="deckSize" type="number" min="1" max="60" step="1" value="60" />
          </label>
        </div>

        <div class="split">
          <div class="block">
            <div class="blockhead">
              <h3>Cards in deck</h3>
              <span id="deckMeta" class="pill">—</span>
            </div>
            <div id="cardsList" class="cards"></div>
          </div>

          <div class="block">
            <div class="blockhead">
              <h3>Selected card odds</h3>
              <span id="selMeta" class="pill">—</span>
            </div>

            <div id="emptyState" class="empty">
              Select a card on the left.
            </div>

            <div id="stats" class="stats hidden">
              <div class="statrow">
                <div class="statlabel">Copies in deck</div>
                <div id="copies" class="statval">—</div>
              </div>

              <div class="statrow">
                <div class="statlabel">P(at least 1 in opening hand)</div>
                <div id="pAtLeast1" class="statval">—</div>
              </div>

              <div class="statrow">
                <div class="statlabel">P(exactly 0)</div>
                <div id="p0" class="statval">—</div>
              </div>

              <div class="statrow">
                <div class="statlabel">Expected copies in hand</div>
                <div id="exp" class="statval">—</div>
              </div>

              <details class="detail">
                <summary>Distribution (exactly k copies)</summary>
                <div id="dist" class="dist"></div>
              </details>

              <p class="hint">
                Uses the hypergeometric distribution (sampling without replacement).
              </p>
            </div>
          </div>
        </div>

        <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>

